---
timezone: Asia/Shanghai 
---

> 请在上边的 timezone 添加你的当地时区，这会有助于你的打卡状态的自动化更新，如果没有添加，默认为北京时间 UTC+8 时区
> 时区请参考以下列表，请移除 # 以后的内容

timezone: Pacific/Honolulu # 夏威夷-阿留申标准时间 (UTC-10)

timezone: America/Anchorage # 阿拉斯加标准时间 (UTC-9)

timezone: America/Los_Angeles # 太平洋标准时间 (UTC-8)

timezone: America/Denver # 山地标准时间 (UTC-7)

timezone: America/Chicago # 中部标准时间 (UTC-6)

timezone: America/New_York # 东部标准时间 (UTC-5)

timezone: America/Halifax # 大西洋标准时间 (UTC-4)

timezone: America/St_Johns # 纽芬兰标准时间 (UTC-3:30)

timezone: America/Sao_Paulo # 巴西利亚时间 (UTC-3)

timezone: Atlantic/Azores # 亚速尔群岛时间 (UTC-1)

timezone: Europe/London # 格林威治标准时间 (UTC+0)

timezone: Europe/Berlin # 中欧标准时间 (UTC+1)

timezone: Europe/Helsinki # 东欧标准时间 (UTC+2)

timezone: Europe/Moscow # 莫斯科标准时间 (UTC+3)

timezone: Asia/Dubai # 海湾标准时间 (UTC+4)

timezone: Asia/Kolkata # 印度标准时间 (UTC+5:30)

timezone: Asia/Dhaka # 孟加拉国标准时间 (UTC+6)

timezone: Asia/Bangkok # 中南半岛时间 (UTC+7)

timezone: Asia/Shanghai # 中国标准时间 (UTC+8)

timezone: Asia/Tokyo # 日本标准时间 (UTC+9)

timezone: Australia/Sydney # 澳大利亚东部标准时间 (UTC+10)

timezone: Pacific/Auckland # 新西兰标准时间 (UTC+12)

---

# Ray

1. 自我介绍
一个 Web3 开发者，也是这次 Defi 共学的发起来人之一
2. 你认为你会完成本次残酷学习吗？
必须可以，这是 Web3 从业者的必备技能

## Notes

<!-- Content_START -->

### 2024.08.19
- DeFi：全称是 Decentralized Finance，允许用户在无需依赖中心化实体的情况下，使用借贷和交易等应用的金融服务
- 其中稳定币是 DeFi 的基石，可以被认为是乐高中的最小零件， DeFi 的高楼就是在这个基础上搭建起来的
- 稳定币是一种加密资产，使用各种机制将其价值维持在一个记账单位，比如一美元或者一港币，稳定币获得底层协议的安全性、交易速度和易用性
- 为什么需要稳定币：
    - 需要提供一个稳定的价值锚点，为加密获得交易提供桥梁
    - 无摩擦、安全且低费用的全球资金转移
- 稳定币的分类：
    - 链下抵押稳定币
        - 法定货币抵押稳定币，直接与法定货币挂钩，比如 USDT 和 USDC
        - 商品抵押稳定币，与黄金、石油等实物资产挂钩，比如 PAX Gold
        - 风险：
            - 法定货币价格波动
            - 链下抵押资产的透明度
            - 监管风险
            - 价格攻击
    - 链上原生稳定币
        - 加密货币抵押稳定币，使用加密货币本身去生成稳定币，比如 Dai
            - 优点：
                - 去中心化程度高
                - 合约决定，不需要信任基础
                - perminssionless
                - 不受监管影响
            - 缺点：
                - 挂钩困难，价格波动大
                - 因为需要超额抵押，资本效率低下
        - 算法稳定币，利用维持价格挂钩的算法，通过各种机制调节稳定币的供应来实现稳定币，比如 UST
            - 算法稳定币的主要类型：
                - rebase 模式
                - Seigniorage 模式（铸币税模式），当前主流的选择，UST 就是使用的这种方式
            - 优点：
                - 合约决定，不需要信任基础
                - 资本效率高
            - 缺点：
                - 未经测试，风险高
- 稳定币的未来：
    - 目前稳定币的采用潮流不可阻挡，越来越多人使用
    - 会被当做一个主流的资产类型，在加密市场中的各个地方使用
    - 稳定币其实是对央行的一种模仿，那么对于 CBDC 来说，稳定币或许是一种威胁，央行会放任一个全新的央行来威胁自己吗？这里还是有很大的风险

### 2024.08.20
- USDT 和 USDC 的原理相对简单，链上发行了多少，链下就抵押多少等值的美元资产
- 而 DAI 是由链上的机制来完成 mint 和销毁
- DAI 在链上是一个标准的 ERC 20 合约，精度为 18，目前 mint 的量超过了 30 亿，超过 50 万个地址持有：https://etherscan.io/token/0x6b175474e89094c44da98b954eedeac495271d0f#code
- 整体逻辑：用户抵押该协议支持的资产，从而获得铆钉美元的去中心化稳定币 DAI
    - 涉及行为：存入、取出、借出、偿还，DAI 的发行和赎回过程
    - 未偿还资产：涉及利率调整和清算，也就是 DAI 锚定美元价格的方式
- 目前存在两种抵押方式：
    - 单抵押品 DAI 系统（SCD），只支持 ETH 进行抵押
    - 多抵押品 DAI 系统（MCD），支持 ETH 之外的抵押品类型
- 整体流程：
    - 用户存入资金，创建 Valut 
    - 用户获得 DAI，并且产生一个同等价值的债务
    - 用户偿还借出的 DAI 及稳定费 DAI，还清债务
    - 偿还之后可以取回抵押品
- 价格稳定机制：
    - 稳定利率调整：
        - 用户抵押生成 DAI 要支付的利息，当 DAI 价格高于 1 美元，降低稳定利息鼓励用户生成 DAI，低于一美元，增加稳定利率销毁 DAI
    - DAI 存款利率（DSR）调整
        - 用户将 DAI 锁进 Maker 获得储蓄收益，DSR 决定收益大小，由贷款利息支付。如果 无法弥补 DAI 存款利息支出，那么将增发 MKR 进行弥补
    - 紧急关停：
        - 用户无法创建 Valut，或者操作已经创建的 valut，用来保证 DAI 持有者目标价格可以兑付的最后手段

### 2024.08.21
- PSM 方式可以让用户存储 USDC 等支持的稳定币资产，1:1 换出等量的 DAI，交易费用为 0.1%，MKR 的持有人有权投票将 PSM 池中的储备金换成其他的资产
- USDC 大量的资产引起社区的担心，可能会带来风险，于是开始寻求其他的方案：
    - 金库风险
    - 现实世界资产 RWA
    - Coinbase 合作
- 同时也在通过其他方式来获取利润：
    - 闪电贷：在同一笔交易里面完成借贷和偿还，而且无需投入资金，但是需要支付 0.05% 的费用
    - 质押衍生品 EtherDAI

### 2024.08.22
- MakerDAO 是 Maker 协议的治理组织，主要包括以下三部分：
    - 维护者：
        - 开发人员
        - 预言机
        - 看护者(Keepers)：将 DAI 价格维持在一美元目标价格的市场参与者
    - 治理者：
        - MKR 持有者
        - 风险团队：由 MKR 的持有人选举产生，通过金融风险研究和抵押品的研究
    - 用户：
        - 金库 Valut 持有者或者通过其他途径获得 DAI 的持有者
- 喂价机制：
    - Maker 协议需要获得 Valut 中抵押资产的实时价格
    - 每种抵押品都部署了 Oracle 模块
        - 线下喂价节点向链上发送价格，存储到 OSM 合约中（Oracle Security Module，喂价安全模块）
        - 为了避免价格被操纵，有两个防御机制：
            - 喂价延迟：通过 OSM 来作为喂价节点和 Maker 协议之间的缓冲
            - 紧急关停：冻结喂价机或者 valut 的操作机制
- 从以上的机制可以看出，即使是对这么去中心化的协议，其中也还是有各种人为干预的情况

### 2024.08.23
- 如果用户在协议中的抵押品价格大幅下跌，没有及时平仓或者增加抵押的资金，当跌破抵押率的时候，生态中的 Keepers 清算人就可以向合约发送请求将这些仓位平仓
- 清算机制：
    - 当前使用的是清算 1.0 机制（Cat）， 英式拍卖机制
    - 平仓的意思就是以当前的价格清算，避免价格继续下跌，造成 DAI 的损失
    - Vault 内的抵押品将会被转移到拍卖模块，被拍卖出售来清算债务
    - Keepers 其实就是链上的套利机器人，任何人都可以成为清算人
    - 清算价格 = （生成 DAI 的数量 * 清算比率）/ 抵押品数量
    - 被清算的 Vault 除了要偿还债务和稳定费，还需要支付一笔清算罚金
- 清算机制 2.0
    - 使用荷兰式拍卖系统取代英式拍卖系统
- Maker 协议中总共有三种拍卖模式
    - 抵押品拍卖：就是上面说的清算机制
    - 盈余拍卖：弥补 Maker 协议中出现的亏损，用户使用 MKR 来购买 DAI，这部分 MKR 会被销毁
    - 债务拍卖：通过增发 MKR 代币出售给使用 DAI 来参与竞拍的用户


### 2024.08.24
- Maker 的生态在不断扩张，主要的竞争对手是 Aave的 GHO，Curve 也提出了 crvUSD 来作为一种稳定币
- 目前在去中心化稳定币方面，DAI 目前是龙头
- MakerDAO 将 Maker 协议分为多个 MetaDAO，每个 MetaDAO 都会有自己的代币和资金库，这个想法与 LXDAO 的子国库机制
- 总体总结：
    - MakerDAO 应该是当前最受信任的 DeFi 项目
    - 但是在这样的一个 DeFi 项目中，其实人为参与的部分还是不少，比如关停机制
    - 所以是不是可以这样的一个共识：人为的参与和干预不可怕，关键是看用什么样的方式和流程来参与，如果有一种方式可以让社区快速做出合理和透明的决策，人为参与也是可以接受的


### 2024.08.25
- 中心化贷款需要的过程很长，甚至会侵犯你的隐私，而且可能会发生歧视
- 去中心化信贷对所有人一视同仁，标准且去中心化的流程
    - Credible Neutrality(可信中立):无需通过第三方机构抵押来贷款，全程由智能合约处理
    - Permissionless(无许可):任何人都可以参与进来，不会拒绝任何人
    - Transparency:所有的过程都在链上公开透明(这在有些情况下不一定是一件好事，很多人会因为隐私的问题而不想公布自己的信息)
    - Availability:不会下班，持续可用
    - Speed: 罚款速度快
    - Tax implications:没有税务问题(从大规模推广的角度上来说，这也不一定是一件好事)
- 没有稳定币，就没有借贷市场
    - 允许用户使用法币进行定向押注
        - 场景1:做多 ETH
            - 将价值 10000 U 的 ETH 存入协议
            - 借贷 5000U
            - 使用 5000U 购买 ETH
        - 场景2:做空 ETH
            - 存入 10000U 进协议
            - 借贷 5000U 的 ETH
            - 以 5000U 的价格卖出 ETH
- 这些流程都对稳定币有巨大的需求，因此很多协议会鼓励用户存入稳定币来提供流动性，这个过程被称之为 Yield Farming
- 协议通过提供原生代币来激励用户存入资金，比如 Compound 提供 COMP 代币来激励提供流动性的用户，从而开启了 DeFiSummer
- 这种方式让用户获得了比传统金融方式高的多的收益(这种高收益是可以持续的吗?)

### 2024.08.26
- APR：年利率的缩写，标识存款人一年内从特定投资中获得的收益，比如将价值 1000 美元的 DAI 存入 Aave，Aave 为 DAI 存款提供 5% 的 APR，那么这笔存款的一年收益将为 50 美元
- APY：年化收益率的缩写，这种收益的计算会自动存入产生的收益，这样投资本金会一直增加。APY 会按照预定间隔，将产生的收益存入到本金中，这样随着时间的推移，存款的金额会随着时间增加而增多
- 流动性池：锁定在只能合约中的代币对或者代币组的集合，比如 USDC/ETH，DAI/USDC。这些流动性池为 DeFi 协议提供流动性，允许用户换入和换出池内特定的代币。
    - 流动性池越深，池子中每种代币的数量就越多，这样每笔交易对池子中代代币数量和价格走势的影响就越小，也就是说，池子中代币数量越多，每次交易的滑点就越小
    - 滑点是指从一种代币到另一种代币的交易中**损失的价值量**
    - 流动性池取代了旧的资产买卖模式，也就是**订单簿**，传统的交易所包括现在的 CEX 也是使用这种方式，卖家和买家围绕价格开始博弈
    - AMM，也就是自动做市商，使用流动性池额不是交易簿来实现 DEX（去中心化交易所），这也是其中的关键技术
        - 无需可，任何人可以访问
        - 没有中介
        - AMM 有三种类型：
            - Uniswap
            - Curve
            - Balancer

### 2024.08.27
- 稳定费是对出借资金的可变年费，比如借入 1000 DAI，稳定费率为 2.5%，一年后，需要归还 Maker 协议 1025 DAI
- 抵押率标识用于贷款的抵押品除以未偿还债务价值，借贷协议通常会设置超额抵押的最低抵押率，他们要求抵押品的数量超过他们将提供的抵押品数量
    - 大多数 Maker Vault 借入 DAI 的抵押率在 150-185% 之间
    - 比如你将价值 1000 美元的 ETH 存入抵押率为 150% 的 Maker Vault，并借出了 500 DAI，那么抵押率就是 (1000/500) x 100 = 200%
    - 如果将价值 750 美元的 ETH 存入抵押率为 150% 的 Maker Vault，同样借出了 500 DAI，那么抵押率就是 （750/500) x 100 = 150%，这说明资产存在被清算的风险
- 浮动利率模型用于确认资产提供者获得多少回报以及借款人应该为借到的钱支付多少报酬，这个模型试图平衡三个变量：
    - 资金池流动性（利用率）
    - 借贷利率
    - 供应率

### 2024.08.28
- 今天看到了 Vitalik 对 DeFi 的评价，目前的 DeFi 的收益都来自于其他的 DeFi 参与用户，这点长期来说不太好，有天花板，那么怎么提供这之外的收益呢？我能想到的两点：
    - RWA
    - 成为实体经济的支付系统
- 常见的利率模型是一个分段函数，在不同的情况下有不同的利率，这个函数的作用是创建一个机制，使资金池的资金利用效率高，同时又能保持足够的流动性，让用户可以自由地进入和退出资金池
- 假如一个资金池的目标是实现 90% 的利用率，那么当资金池的利用率低于 90%，那么借贷的利率就会很低，鼓励大家借贷，如果资金池的利用率高于 90%，那么借贷的利率就会很高，鼓励借款人归还资金
- 供应率和利用率之间存在同样的动态关系，当利用率高时，资金的提供者有动力将资金存入到池子中，利用率低时，存款的动力就会比较小
- 借款利率、利用率、供应率之间的动态平衡提高了池子的流动性，并提高了资金的利用率
- 清算：
    - 当存入的抵押品价值低于最低抵押率时，那么就会触发清算，用来偿还债务，偿还债务后剩余的任何抵押品都将退还给借款人
    - 在清算时，会出现一个强平价格，这个价格会触发清算
    - 在触发清算的时候，还需要支付一定比例的费用来作为清算罚款
    - 在抵押 ETH 借 DAI 的例子中，如果要避免清算，可以做的事情是：
        - 偿还部分 DAI 来提高抵押率
        - 增加更多的 ETH
        - 出售抵押品来还债，从而关闭 Vault
        - 通过使用 DAI 常来所有债务来关闭 Vault，从而拿回抵押品
- 闪电贷：在一个区块内完成借贷和偿还动作，这样的借贷不需要抵押品，但是需要支付资金使用费用，常用于 DeFi 套利，由 Aave 首创，是很多 DeFi 协议的收益来源
- 常见的 DeFi 协议：
    - Maker（现在叫 Sky 了）
    - Compound
    - Aave

### 2024.08.29
- 隔离池：用来保护整个协议的安全
    - 如果使用但一的池子，攻击者可能会通过操控抵押品的价格来攻击协议，具体流程：
        - 创建一个代币，操控价格升值，达到一定价格（很高的价格）
        - 将这些代币加入到池子中，借出对应的资产
        - 大量卖出代币，让代币接近归零，无法通过拍卖偿还债务
        - 借出的资产不归还，打到窃取资产的目的
    - 而隔离池通过创建不同的池子，这样各种抵押品的就分隔开来，不同的池子有不同的人提供和借出资金，风险被控制在单一的池子中，如果发现问题，不会蔓延到其他的池子中
    - 这样虽然无法解决所有的问题，但是已经可以将风险控制在最小范围，这样可以针对不同的池子有不同的审计，让风险可以被所有人的看见
- 固定利率：当前大多数的 DeFi 协议都是浮动利率，固定利率可以降低流动性的风险，但这个要求项目本身需要有更多的资金

### 2024.08.30
- 最近在研究这个项目：https://www.bridge.xyz/
- 严格来说，这个项目并不是一个 DeFi 项目，而是一个 Web2 的项目，由原来 USDC 团队的人创建
- 它的两个主要功能：
    - 美元稳定币的支付系统
    - 稳定币的发行
- 感觉有点像是美国的央行数字货币系统，全球的区块链网络都可以是美元稳定币的系统

### 2024.08.31
- DeFi 的借贷中，一直有资金利用率低的问题，那么如何使用现有的 DeFi 来创建新的二级市场，现在有两种思路
    - 分割本金和利息
        - 将一笔资产的利息包装成新的衍生品，比如将一笔 10000 DAI 投资到 Aave，将这笔产品的利息打包成一个新的产品，另一个用户愿意以 500 DAI 的加来来购买这个产品 
    - 创建结构化的产品
        - 结构性产品由两组产品组成，使用相同的基础、可变利率、收益
        - 第一组使用固定利率
        - 第二组使用浮动利率
        - 如果第一组达不到预期的收益，那么就由第二组来补充，从而保证第一组的收益打到目标
- 这种衍生品可以提高资本的使用效率，但是这些总体有更大的风险，如果出现系统性危机，这些资产可能会带来更大的风险（需要在链上引入这样的产品组合吗？）

### 2024.09.02
- AMM：去中心化交易所的核心，可以支持用户相互交互加密货币，最初来源于 Vitalik 在 2016 年的构想
- 在 AMM 出现之之前，获取加密货币的唯一方式就是挖矿或者通过中心化交易所购买，中心化交易所的模式被称为订单簿模式
- 中心化交易所并没有那么值得信任，FTX 就是代表
- AMM 原理:
	- k = x * y，x 和 y 表示两种资产的储备
	- k 对于当前状态来说是不变的，但是如果有人向池中添加其他的资产，那么就会发生变化
	- k 在一个时间点是不变的
	- 在 x 和 y 互换的期间，价格会发生浮动，而这样就有了套利的空间

### 2024.09.04
- AMM 中的一些基本概念：
    - 流动性：流动性是任何市场中最重要的东西，它表示一种资产在不影响其价格的情况下兑换成另一个资产的难易程度
        - 比如现金的流动性是最高的
        - NFT 的流动性比较低
        - 房地产的流动性就很差
    - 流动性资金池：由存入智能合约的两种或者多种不同代币组成，AMM 或者说 DEX 依赖流动性池子来正常运行
    - 滑点：预期价格与交易执行时的最终价格之间的差额
        - 流动性越大的池子，滑点就越小
    - 流动性提供者：DEX 或者 AMM 不会自己添加流动性池，而是让任何有资金的来提供，他们被称之为流动性提供者
        - 流动性提供者从中赚取利息、手续费或者空投
        - 当流动性提供者将代币存入池子中时，会收到 LP 代币，LP 代币是他们从流动性池中提取资金的凭证
    - 无常损失：当存入资金的市场价格与存入是相比发生了变化，就会发生无常损失
        - 有可能流动性提供者从池子中提取出资金时，价值比加入时要低，比如加入池子中的两种代币价格都降低了
    - 套利：是指交易者利用价格之间或者市场内的价差来获利，大多情况下，这类的套利活动使用代码来执行



<!-- Content_END -->
