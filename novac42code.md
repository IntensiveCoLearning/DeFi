---
timezone: Asia/Shanghai
---

# Hello from Nova

1. 自我介绍：我是Nova，产品经理，21年开始关注Web3。对Defi有一定了解，但希望借此机会系统化学习。
2. 既然报名，目标是完成课程，不过这是第一次参加Colearning, 不太确定课程的深度和强度，所以如果发现换种方式和节奏来学习更好，也不一定会按部就班完成此课程。但不论怎样，仍然很高兴结识更多对Web3和去中心化金融有兴趣的伙伴，以及非常感谢LXDAO组织这个系列，看了往期的几次活动，绝对是非常有意义的事情，以后也会持续关注新的共学活动的。

## Notes

<!-- Content_START -->

### 2024.08.19

今天学习了Aave的Flash Loan作为无抵押借贷的原理，因为之前觉得有抵押借贷好理解，反正假如不还就自动清算抵押品嘛。无抵押借贷是如何在没有信用背书的情况下控制风险的呢？学习后了解了Defi的Flash Loan是在一个区块内完成借贷和偿还，这利用了以太坊的原子性（atomicity），也就是如果一个智能合约的交易由多个步骤组成，任何一个步骤失败，整个交易就会被回滚，所有已经执行的操作都会被撤销，区块链的状态将恢复到交易开始前的状态，这样就使出借的资金不会暴露在违约风险中。
那又产生另一个疑问，这种快借快还的借贷肯定会被用来套利，而且会有很多套利机器人运作，为什么利差在机器人交易下仍然没有被抹平呢？继续学习得到的一些可能解释：

1. 市场效率：
不同交易所或平台之间的价格差异仍然存在，这是因为市场并非完全有效。价格更新并非瞬时的，尤其是在流动性较低或较小的交易所，价格更新的速度较慢，可能会导致价格暂时偏离主流交易所的价格。

2. 交易深度影响流动性：
即使有套利机会，很多交易对的流动性不足，也就是说交易量有限。套利机器人虽然能探测到价格差异，但执行这些套利操作可能会影响市场价格，或者由于流动性不足，导致交易无法以预期的价格完成，从而使得套利空间依然存在。

3. 区块链的交易延迟：
在区块链网络中，交易需要打包进区块并传播到全网，这个过程需要时间。在这段时间内，市场价格可能已经发生变化，因此即使套利机器人发起了交易，也可能因为区块链的延迟，错过最佳套利时机。套利空间可能短暂消失，但很快又可能因为市场波动再次出现。

4. 不同平台之间的技术和算法差异：
不同交易平台之间的技术实现、算法和交易机制差异，也会导致套利机会。比如，一些交易所的撮合引擎效率不同，可能导致价格更新不一致。另外，一些去中心化交易所（DEX）的流动性提供者（LP）的机制、滑点和手续费结构也会影响价格和套利机会。

5. 交易本身的摩擦：
虽然闪电贷提供了无抵押贷款的可能性，但套利并不是零成本的。每笔交易都涉及到一定的手续费、gas费以及可能的失败风险。高频的套利机器人可能会选择放弃利润较低的套利机会，从而留下了对其他套利者有利的空间。

### 2024.08.20
1. 无抵押借贷的应用场景：看到群里有讨论无抵押借贷可以用于清算，我的理解是原本清算债务时，需要先准备资金换取抵押品，再把抵押品卖掉平账，而无抵押借贷让“手动平账”这个操作可以通过智能合约自动完成，不需要upfront的资金投入，对于跨国清算、跨资产类别清算非常友好。
2. 稳定币：货币的本质是一般等价物，比特币和以太坊作为货币的问题是相对于现实世界的一般等价物价格波动太剧烈，所以只能看作资产，很难看作货币。稳定币是为了让加密世界也拥有一般等价物。USDT和USDC是以现实世界的美元为锚，背后对应的是可兑换的美元资产；DAI这样的稳定币是以链上的抵押品为锚，它的意义是脱离现实世界也可以换取一般等价物（想象有个AI打工人，它挣的钱都是加密货币，又怕加密货币贬值，这个AI可以无需任何人的许可就把加密货币换成稳定币）。以链上资产为锚的稳定币的风险就是假如链上资产大幅贬值（比如全世界矿机都被ban了），这种稳定币的价值也失去了。
测试网操作：1.8 wstETH作为抵押品，铸造并借出4027.8 TrenUSD稳定币
Txn: 0x100535692c3e25f069252adfa5889d3b33e1245173ca7feec00985a122219b4c

### 2024.08.21
用BulbaSwap在Morph Holesky测试网换了一些ETH为USDT，Txn 0xb4a5fd369c8c709c21d26b79698d2052a13780e45ce0f19257fda41daf6de85e
并为ETH/USDT交易对和ETH/WBTC交易对注入了流动性：
Txn 0xc047585fe418c5ad5998bea19f39ff1b8de8a74c62d5b797a3cbd17ed2f7fdbf
Txn 0xb1e4a73e429b162b5fe280dd47f87c33e7fcfab059ebc483040b6f2615af127a
### 2024.08.22
今天查看了TrenFinance铸造稳定币的合约`0x31bEEee3CF731B1A4Cc4649504518DA3782c242e`，学习了Defi的合约一般把代理合约和实现合约分离，前者负责管理和升级，后者负责具体的实现逻辑。这样可以在不改变合约地址的情况下，升级合约的实现逻辑，代理合约规定了admin只有维护实现合约的权力，而不能通过合约交互监守自盗。
今天还把从TrenFinance借出的稳定币trenUSD存入了稳定币池，我的理解是这相当于从银行贷出的款又在银行开户存回了银行，可以帮助稳定币值。
### 2024.08.23
测试网的Defi应用似乎还是有Bug：
1. BulbaSwap的UNI价格高到离谱，比ETH都贵了
2. AbraFinance识别不到Holesky测试网的USDT和WETH余额，于是只能抵押UNI

Deposit UNI: `0x2d4069bd0dbbf5b4df387716bb2c86e4fe76f436720502bf5b38f24d5e2bada0`

把存的UNI作为抵押品：`0x5d7555f9b7954a0fd6745bddff3bb3971be5c138e614209e38025472d8393205`

借出USDT：`0x3cd0e191e665302c1cc9407d7eb760e241edf7acb72401d465adf92e0868f6be`

### 2024.08.26
还了借出的TrenUSD稳定币`0xc2181a51ca51987b3b37037d5a40b54639c67eb60434f72d52c60a9d065e7b91`
赎回wstETH `0x0cb571429b56062dd137824e60e62a02e22e0086c76b119c5084387e948c201b`

### 2024.08.27
MakerDAO是如何控制DAI的币值稳定的？有几个手段：
1. 控制超额抵押的杠杆比例，是抵押价值150的DAI才能借出100个DAI，还是抵押170个才可以借出。这个我理解类似银行准备金率
2. 利率调节，在MakerDAO里是stability fee，借出DAI的贷款利息
3. PSM锚定稳定模块 - 有点像引入一个套利机制，假如DAI价值下跌到不足1美元，人们可以用USDC换取便宜的DAI来套利
以及DAI的央行实际上就是MakerDAO这个去中心化组织，大家在链上投票来决定准备金率和利率，投票的人需要质押自己的治理代币MKR（看投票记录发现有不少持有大量MKR的大股东）

### 2024.08.28
找到一篇讲Curve等稳定币交易所如何设计机制来引导流动性：https://crypto.nateliason.com/p/curve-wars?s=w

### 2024.08.30
今天继续学习Curve的原理。之前知道Uniswap是用等积公式 x*y = 常数来作为自动做市的兑换公式，但这个简单算法的问题在于如果池子很大，兑换的量很小，那么问题不大，但如果兑换的量很大，这本身就改变了池子的供给，可能最终成交价格就会偏离很多（所谓Slippage-滑点），这对于币值都是1美元的稳定币尤其不友好。举个例子，一个市场里有人想用白色iPhone15去换黑色iPhone15. 两款只是颜色不同，价格是一样的。假如黑色和白色iPhone都有一千万台，那么初始的乘积是一千万的平方。假如有人拿来500万台白色iphone来换黑色iphone，黑色iphone被换走500万台，只剩下500万台，那白色iphone按照公式就得增加到2000万台，白色iphone的流动性就会稀缺。
这对稳定币的兑换是个大问题，因为每天都有大量的人在把一种稳定币兑换成另一种稳定币。Curve为稳定币出了一个新的AMM算法-StableSwap Invariant，让稳定币在交易量较大时的滑点也几乎为零。

### 2024.08.31

由于Curve侧重稳定币兑换，平台有足够大的流动性池就十分重要，因此要想办法吸引更多用户来Curve提供流动性。Curve有几种激励机制：
1. LP可以获得流动性池中交易费用的一部分。但这部分的收益率很低，因为当池子是几十亿美元，个体投入的流动性只占很少的比例。
2. LP可以获得Curve的治理token CRV。但这部分收益也不高，假如没有更多激励，用户很可能获得CRV之后就立即抛售。
3. 如何让大家愿意持有CRV，而且愿意提供流动性去换更多CRV呢？这就要说到Curve的veCRV机制，veCRV是CRV的持有者托管CRV之后换取的token，而且这个托管的锁定期是1-4年之久。有什么好处呢？好处之一是更多的交易手续费分成：Curve上的兑换交易收3个点的手续费，这手续费的50%由所有提供流动性的LP分，而另一半由veCRV的持有者分。好处之二是流动性矿池本身也会拨出钱奖励LP，特别是一些小的币，希望能增加自己的流动性，发币方会自己出钱奖励LP。持有更多的veCRV，可以拿到更高的奖励比例。

### 2024.09.02

用链桥把USDT从Holesky发送到Morph Holesky network: `0x2258a99fe75b90b354863a7de4cdabedf8fae0b4ae768cac69a6577bddb05687`

还了之前借的USDT：`0xcd5ef346b5f5ed97b64d62a5df7b6e7064f26ce4328bbd88d8791313a662560c`

又提供了5 USDT: `0xdc8b40bfb14bc6c502b2bc0c7f296099f7d9ac06409a89e251e47375785da307`

### 2024.09.03
今天了解了一下RAI，虽然同样是以链上资产作抵押发行的稳定币，但它和DAI的不同点在于RAI的币值并不是稳定在1美元，而是浮动的，它的币值也不是定在1美元，最初的目标值是$3.14，看起来是向pi致敬。它的币值由市场供需决定，这很像一个采取浮动汇率的国家发行的货币在汇率市场的价格决定机制，只不过调控币价的不是这个国家的外汇管理局，而是一套控制器领域常用的PID算法，根据市场价格的预言机提供的价格信息，调控利率改变供需，从而达到控制价格的目的。

### 2024.09.05
在Bulbaswap通过Uniswap v3的协议提供流动性: `0xc2d8f717e10e80617d71c96e32c7c4586a0082451f309238ef67bdb469ff262a`
v3和v2的区别是v3的LP可以设置在哪个价格区间提供流动性，更好地管理自己的收益。

### 2024.09.07
换了Morph上的考拉币，并为考拉币交易对提供流动性：
`0xb0c5c0658d9622b24510b80734b18f0b8727605897bf71f7eb151d8a62e652d3`
`0x7275f8b117b0abfcd71b3f14fe7d0dc63c30c98d4bf5c99318403f11e38207e7`

### 2024.09.08
今天了解了Aave V4相比V3的重大升级：统一流动性层。V3引入了Portal来做资产的跨链桥接，比如一个L2链上贷款利率更高，用户可以将资产转移到这个链去放贷。但是V3的跨链桥接依赖的还是外部白名单协议，而V4将把不同链上的资产、借款上限、利率、激励等进行统一管理，更高效地利用资产。

<!-- Content_END -->
